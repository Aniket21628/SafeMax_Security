import{A as M,j as e,I as m,_ as l}from"./index-CSpRVhsm.js";import{r,u as q}from"./vendor-DhN6jbAB.js";import{l as F,a as d}from"./logo-DUNX4YAq.js";import{c as o}from"./createLucideIcon-DcRGKe__.js";import{U as O}from"./users-De-2gxwh.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=o("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=o("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=o("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=o("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=o("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=o("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function G(){const[N,b]=r.useState(!1),[c,h]=r.useState("dashboard"),[v,g]=r.useState(!1),[a,x]=r.useState({firstname:"",lastname:"",username:"",password:""}),[p,j]=r.useState([]),[u,w]=r.useState([]),[y,k]=r.useState([]),A=q(),f=r.useRef();r.useEffect(()=>{const s=t=>{f.current&&!f.current.contains(t.target)&&b(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const{authToken:n}=r.useContext(M),C=async(s,t)=>{if(!s){console.warn("No ID provided to handleAppointmentStatusChange");return}console.log(`Changing status for appointment ID: ${s} to ${t}`);try{await d.put(`https://safemax-security-uxq6.onrender.com/api/v1/admin/appointments/${s}/status`,{status:t},{headers:{Authorization:`Bearer ${n}`}}),j(p.map(i=>i._id===s?{...i,status:t}:i)),l.success("Appointment status updated successfully!")}catch(i){console.error("Error updating appointment status:",i),l.error("Failed to update appointment status. Please try again.")}},U=async(s,t)=>{if(!s){console.warn("No ID provided to handleQueryStatusChange");return}console.log(`Changing status for query ID: ${s} to ${t}`);try{await d.put(`https://safemax-security-uxq6.onrender.com/api/v1/admin/queries/${s}/status`,{status:t},{headers:{Authorization:`Bearer ${n}`}}),w(u.map(i=>i._id===s?{...i,status:t}:i)),l.success("Query status updated successfully!")}catch(i){console.error("Error updating query status:",i),l.error("Failed to update query status. Please try again.")}},S=()=>{l("Signing Out....",{duration:2e3}),setTimeout(()=>{localStorage.removeItem("token"),A("/signin")},2e3)},$=()=>{b(s=>!s)};r.useEffect(()=>{n&&(async()=>{try{const t=await d.get("https://safemax-security-uxq6.onrender.com/api/v1/admin/adminUsers",{headers:{Authorization:`Bearer ${n}`}});k(t.data.adminUsers)}catch(t){console.error("Error fetching admin users:",t),l.error("Failed to fetch admin users. Please try again.")}})()},[n]),r.useEffect(()=>{n&&(async()=>{try{const t=await d.get("https://safemax-security-uxq6.onrender.com/api/v1/appointment/appointments",{headers:{Authorization:`Bearer ${n}`}});j(t.data.appointments)}catch(t){console.error("Error fetching appointments:",t),l.error("Failed to fetch appointments. Please try again.")}})()},[n]),r.useEffect(()=>{n&&(async()=>{try{const t=await d.get("https://safemax-security-uxq6.onrender.com/api/v1/appointment/queries",{headers:{Authorization:`Bearer ${n}`}});w(t.data.queries)}catch(t){console.error("Error fetching queries:",t),l.error("Failed to fetch queries. Please try again.")}})()},[n]);const z=async s=>{if(s.preventDefault(),!a.username||!a.firstname||!a.lastname||!a.password){l.error("Please fill in all fields");return}try{(await d.post("https://safemax-security-uxq6.onrender.com/api/v1/admin/adminUsers/signup",{firstname:a.firstname,lastname:a.lastname,username:a.username,password:a.password},{headers:{Authorization:`Bearer ${n}`}})).status===201&&(l.success("User added successfully!"),x({username:"",firstname:"",lastname:"",password:""}),g(!1))}catch(t){console.error("Error adding user:",t),l.error("Failed to add user. Please try again.")}},E=()=>{switch(c){case"dashboard":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 px-2 lg:grid-cols-3 gap-4",children:[e.jsx(m,{position:"top-center",reverseOrder:!1}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Total Appointments"}),e.jsx("p",{className:"text-white text-3xl font-bold",children:p.length})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Total Queries"}),e.jsx("p",{className:"text-white text-3xl font-bold",children:u.length})]}),e.jsxs("div",{className:"hidden lg:block bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Admin Users"}),e.jsx("p",{className:"text-white text-3xl font-bold",children:y.length})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 px-2 lg:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Pending Appointments"}),e.jsx("p",{className:"text-white text-3xl font-bold",children:p.filter(s=>s.status==="pending").length})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"New Queries"}),e.jsx("p",{className:"text-white text-3xl font-bold",children:u.filter(s=>s.status==="new").length})]}),e.jsxs("div",{className:"block lg:hidden bg-gray-800 p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Admin Users"}),e.jsx("p",{className:"text-white text-3xl font-bold",children:y.length})]})]})]});case"appointments":return e.jsxs("div",{className:" px-4 sm:px-6 lg:px-0.5",children:[e.jsx(m,{position:"top-right",reverseOrder:!1}),e.jsx("h2",{className:"text-white text-xl font-semibold mb-4",children:"Appointment Management"}),e.jsx("div",{className:"bg-gray-800 rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Comments"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",style:{width:"170px"},children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:p.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.appointmentDate}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-300 lg:max-w-[300px]",children:e.jsx("div",{className:"break-words whitespace-normal",children:s.comments})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="confirmed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",style:{width:"170px"},children:e.jsxs("select",{value:s.status,onChange:t=>C(s._id,t.target.value),style:{width:"120px"},className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-gray-700 text-white rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"canceled",children:"Canceled"})]})})]},s._id))})]})})]});case"queries":return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-0.5",children:[e.jsx(m,{position:"top-right",reverseOrder:!1}),e.jsx("h2",{className:"text-white text-xl font-semibold mb-4",children:"Query Management"}),e.jsx("div",{className:"bg-gray-800 rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider lg:w-[300px]",children:"Comments"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider w-[170px]",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:u.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.subject}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-300 lg:max-w-[300px]",children:e.jsx("div",{className:"break-words whitespace-normal",children:s.comments})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="resolved"?"bg-green-100 text-green-800":s.status==="in-progress"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("select",{value:s.status,onChange:t=>U(s._id,t.target.value),className:"w-[120px] block py-2 px-3 border border-gray-300 bg-gray-700 text-white rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in-progress",children:"In-Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})})]},s._id))})]})})]});case"users":return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx(m,{position:"top-right",reverseOrder:!1}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-white text-xl font-semibold",children:"Admin User Management"}),e.jsxs("button",{onClick:()=>g(!0),className:"bg-teal-600 hover:bg-teal-700 text-white font-semibold text-sm py-1.5 px-3 rounded inline-flex items-center sm:py-2 sm:px-4 sm:text-base",children:[e.jsx(L,{className:"mr-1.5 w-4 h-4 sm:w-5 sm:h-5"}),"Add New Admin"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Username"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Firstname"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Lastname"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Role"})]})}),e.jsx("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.username}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.firstname}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:s.lastname}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:"Admin"})]},s._id))})]})})]});default:return e.jsx("div",{children:"Select a tab"})}};return e.jsxs("div",{className:"min-h-screen bg-gray-900 flex",children:[e.jsxs("div",{ref:f,className:`bg-gray-800 text-white w-64 space-y-6 py-7 px-2 absolute inset-y-0 left-0 transform ${N?"translate-x-0":"-translate-x-full"} md:relative md:translate-x-0 transition duration-200 ease-in-out`,children:[e.jsxs("div",{className:"flex items-center space-x-2 px-4",children:[e.jsx("a",{href:"",children:e.jsx("img",{src:F,alt:"1729957758751",width:80,height:80,className:"mx-auto rounded-full"})}),e.jsx("span",{className:"text-2xl font-extrabold",children:"SafeMax"})]}),e.jsxs("nav",{children:[e.jsxs("a",{href:"#",className:`block py-2.5 px-4 rounded transition duration-200 ${c==="dashboard"?"bg-teal-600":"hover:bg-gray-700"}`,onClick:()=>h("dashboard"),children:[e.jsx(I,{className:"inline-block mr-2",size:16})," Dashboard"]}),e.jsxs("a",{href:"#",className:`block py-2.5 px-4 rounded transition duration-200 ${c==="appointments"?"bg-teal-600":"hover:bg-gray-700"}`,onClick:()=>h("appointments"),children:[e.jsx(P,{className:"inline-block mr-2",size:16})," Appointments"]}),e.jsxs("a",{href:"#",className:`block py-2.5 px-4 rounded transition duration-200 ${c==="queries"?"bg-teal-600":"hover:bg-gray-700"}`,onClick:()=>h("queries"),children:[e.jsx(_,{className:"inline-block mr-2",size:16})," Queries"]}),e.jsxs("a",{href:"#",className:`block py-2.5 px-4 rounded transition duration-200 ${c==="users"?"bg-teal-600":"hover:bg-gray-700"}`,onClick:()=>h("users"),children:[e.jsx(O,{className:"inline-block mr-2",size:16})," Admin Users"]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-gray-800 shadow-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>$(),className:"text-gray-300 hover:text-white md:hidden",children:e.jsx(Q,{size:24})}),e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Admin Dashboard"}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{className:"text-gray-300 hover:text-white",onClick:S,children:e.jsx(D,{size:20})})})]})}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:E()})})]}),v&&e.jsxs("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:[e.jsx(m,{position:"top-right",reverseOrder:!1}),e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsx("div",{className:"inline-block align-bottom bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:align-middle sm:max-w-sm sm:w-full",children:e.jsxs("div",{className:"bg-gray-800 px-8 py-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white text-center mb-6",children:"Add New Admin User"}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300",children:"Username"}),e.jsx("input",{type:"text",name:"username",id:"username",value:a.username,onChange:s=>x({...a,username:s.target.value}),className:"w-full h-10 px-3 rounded-md bg-gray-700 border border-gray-600 focus:border-teal-500 focus:ring-teal-500 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstname",className:"block text-sm font-medium text-gray-300",children:"First Name"}),e.jsx("input",{type:"text",name:"firstname",id:"firstname",value:a.firstname,onChange:s=>x({...a,firstname:s.target.value}),className:"w-full h-10 px-3 rounded-md bg-gray-700 border border-gray-600 focus:border-teal-500 focus:ring-teal-500 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastname",className:"block text-sm font-medium text-gray-300",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastname",id:"lastname",value:a.lastname,onChange:s=>x({...a,lastname:s.target.value}),className:"w-full h-10 px-3 rounded-md bg-gray-700 border border-gray-600 focus:border-teal-500 focus:ring-teal-500 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",value:a.password,onChange:s=>x({...a,password:s.target.value}),className:"w-full h-10 px-3 rounded-md bg-gray-700 border border-gray-600 focus:border-teal-500 focus:ring-teal-500 text-white",required:!0})]}),e.jsxs("div",{className:"flex justify-center mt-6",children:[e.jsx("button",{type:"button",className:"px-4 py-2 mr-2 rounded-md bg-gray-600 text-gray-300 hover:bg-gray-500 focus:outline-none",onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md bg-teal-600 text-white hover:bg-teal-700 focus:outline-none",children:"Add User"})]})]})]})})]})]})]})}export{G as default};
